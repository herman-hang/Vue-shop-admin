(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods_cate"],{"107c":function(t,e,a){var r=a("d039");t.exports=r((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,a){"use strict";var r=a("d784"),n=a("44e7"),o=a("825a"),s=a("1d80"),i=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),p=a("9f7f"),m=a("d039"),f=p.UNSUPPORTED_Y,g=[].push,h=Math.min,b=4294967295,v=!m((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));r("split",(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=String(s(this)),o=void 0===a?b:a>>>0;if(0===o)return[];if(void 0===t)return[r];if(!n(t))return e.call(r,t,o);var i,l,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,f=new RegExp(t.source,p+"g");while(i=d.call(f,r)){if(l=f.lastIndex,l>m&&(u.push(r.slice(m,i.index)),i.length>1&&i.index<r.length&&g.apply(u,i.slice(1)),c=i[0].length,m=l,u.length>=o))break;f.lastIndex===i.index&&f.lastIndex++}return m===r.length?!c&&f.test("")||u.push(""):u.push(r.slice(m)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=s(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n,a):r.call(String(n),e,a)},function(t,n){var s=a(r,this,t,n,r!==e);if(s.done)return s.value;var d=o(this),p=String(t),m=i(d,RegExp),g=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"g":"y"),_=new m(f?"^(?:"+d.source+")":d,v),y=void 0===n?b:n>>>0;if(0===y)return[];if(0===p.length)return null===u(_,p)?[p]:[];var x=0,w=0,k=[];while(w<p.length){_.lastIndex=f?0:w;var C,F=u(_,f?p.slice(w):p);if(null===F||(C=h(c(_.lastIndex+(f?w:0)),p.length))===x)w=l(p,w,g);else{if(k.push(p.slice(x,w)),k.length===y)return k;for(var $=1;$<=F.length-1;$++)if(k.push(F[$]),k.length===y)return k;w=x=C}}return k.push(p.slice(x)),k}]}),!v,f)},1356:function(t,e,a){},"14c3":function(t,e,a){var r=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),s=a("9112");for(var i in n){var l=r[i],c=l&&l.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(u){c.forEach=o}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),o=n("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("d3b7");function r(t,e,a,r,n,o,s){try{var i=t[o](s),l=i.value}catch(c){return void a(c)}i.done?e(l):Promise.resolve(l).then(r,n)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var s=t.apply(e,a);function i(t){r(s,n,o,i,l,"next",t)}function l(t){r(s,n,o,i,l,"throw",t)}i(void 0)}))}}},2374:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.getGoodsList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,border:""}},[a("el-table-column",{attrs:{prop:"goods_id",label:"ID",width:"90px"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"90px"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"90px"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("date")(e.row.add_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editGoods(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteGoods(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[1,2,10,100],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],o=a("1da1"),s=(a("96cf"),{data:function(){return{goodsList:[],queryInfo:{query:"",pagenum:1,pagesize:2},total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("goods",{params:t.queryInfo});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取列表数据失败！"));case 6:t.goodsList=r.data.goods,t.total=r.data.total;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},deleteGoods:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.delete("goods/".concat(t.goods_id));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message({type:"error",message:"删除失败!"}));case 6:e.getGoodsList(),e.$message({type:"success",message:"删除成功!"});case 8:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addGoods:function(){this.$router.push("/goods/add")},editGoods:function(t){this.$router.push({path:"/goods/edit",query:{goods_id:t.goods_id}})}}}),i=s,l=a("2877"),c=Object(l["a"])(i,r,n,!1,null,"5fee1f0f",null);e["default"]=c.exports},"3b0d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("分类参数")])],1),a("el-card",[a("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning",closable:!1}}),a("el-row",{staticClass:"cate"},[a("el-col",[a("span",[t._v("选择商品分类：")]),a("el-cascader",{attrs:{options:t.cateList,props:t.cateProps,"expand-trigger":"hover"},on:{change:t.cateHandleChange},model:{value:t.cateValue,callback:function(e){t.cateValue=e},expression:"cateValue"}})],1)],1),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isBtnDisabled},on:{click:function(e){t.addParamsDialogVisible=!0}}},[t._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.manyParamsList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.handleClose(n,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{prop:"attr_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editParams(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteParams(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isBtnDisabled},on:{click:function(e){t.addParamsDialogVisible=!0}}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.onlyParamsList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.handleClose(n,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{prop:"attr_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editParams(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteParams(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.addParamsDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addParamsDialogVisible=e},close:t.addParamsClose}},[a("el-form",{ref:"addParamsRef",attrs:{model:t.addParamsForm,rules:t.addParamsRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.addParamsForm.attr_name,callback:function(e){t.$set(t.addParamsForm,"attr_name",e)},expression:"addParamsForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addParamsDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑"+t.titleText,visible:t.editParamsDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editParamsDialogVisible=e},close:t.editParamsClose}},[a("el-form",{ref:"editParamsRef",attrs:{model:t.editParamsForm,rules:t.editParamsRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.editParamsForm.attr_name,callback:function(e){t.$set(t.editParamsForm,"attr_name",e)},expression:"editParamsForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editParamsDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.subEditParams}},[t._v("确 定")])],1)],1)],1)},n=[],o=a("1da1"),s=(a("159b"),a("ac1f"),a("1276"),a("99af"),a("498a"),a("a15b"),a("a434"),a("96cf"),{data:function(){return{cateValue:[],cateList:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},activeName:"many",manyParamsList:[],onlyParamsList:[],addParamsDialogVisible:!1,addParamsForm:{},addParamsRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editParamsDialogVisible:!1,editParamsForm:{},editParamsRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},inputVisible:!1,inputValue:""}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取分类数据失败！"));case 6:t.cateList=r.data;case 7:case"end":return e.stop()}}),e)})))()},cateHandleChange:function(){this.getParamsData()},handleClick:function(){this.getParamsData()},getParamsData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(3===t.cateValue.length){e.next=5;break}return t.cateValue=[],t.manyParamsList=[],t.onlyParamsList=[],e.abrupt("return",!1);case 5:return e.next=7,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:t.activeName}});case 7:if(a=e.sent,r=a.data,200===r.meta.status){e.next=11;break}return e.abrupt("return",t.$message.error("获取数据失败！"));case 11:r.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(","):[],t.inputVisible=!1,t.inputValue=""})),"many"===t.activeName?t.manyParamsList=r.data:t.onlyParamsList=r.data;case 13:case"end":return e.stop()}}),e)})))()},addParams:function(){var t=this;this.$refs.addParamsRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("categories/".concat(t.getCateId,"/attributes"),{attr_name:t.addParamsForm.attr_name,attr_sel:t.activeName});case 2:if(r=e.sent,n=r.data,201===n.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("添加失败！"));case 6:t.$message.success("添加成功！"),t.getParamsData(),t.addParamsDialogVisible=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addParamsClose:function(){this.$refs.addParamsRef.resetFields()},editParams:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.get("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id),{params:{attr_sel:e.activeName}});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("获取数据失败！"));case 6:e.editParamsForm=n.data,e.getParamsData(),e.editParamsDialogVisible=!0;case 9:case"end":return a.stop()}}),a)})))()},subEditParams:function(){var t=this;this.$refs.editParamsRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("categories/".concat(t.getCateId,"/attributes/").concat(t.editParamsForm.attr_id),{attr_name:t.editParamsForm.attr_name,attr_sel:t.activeName});case 4:if(r=e.sent,n=r.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("更新失败！"));case 8:t.$message.success("更新成功！"),t.getParamsData(),t.editParamsDialogVisible=!1;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editParamsClose:function(){this.$refs.editParamsRef.resetFields()},deleteParams:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.delete("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message({type:"error",message:"删除失败!"}));case 6:e.$message({type:"success",message:"删除成功!"}),e.getParamsData();case 8:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleInputConfirm:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.inputValue.trim().length){a.next=4;break}return t.inputValue="",t.inputVisible=!1,a.abrupt("return",!1);case 4:t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,e.saveAttrVals(t);case 8:case"end":return a.stop()}}),a)})))()},saveAttrVals:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.put("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:e.activeName,attr_vals:t.attr_vals.join(",")});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("修改失败！"));case 6:e.$message.success("修改成功！");case 7:case"end":return a.stop()}}),a)})))()},handleClose:function(t,e){e.attr_vals.splice(t,1),this.saveAttrVals(e)},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))}},computed:{isBtnDisabled:function(){return 3!==this.cateValue.length},getCateId:function(){return 3===this.cateValue.length?this.cateValue[2]:null},titleText:function(){return"many"===this.activeName?"动态参数":"静态属性"}}}),i=s,l=(a("a381"),a("2877")),c=Object(l["a"])(i,r,n,!1,null,"30b53cfd",null);e["default"]=c.exports},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),o=a("b622"),s=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,o=a("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},"4f9b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("el-card",[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addGoodsRef",attrs:{model:t.addGoodsForm,rules:t.addGoodsRules,"label-width":"100px","label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addGoodsForm.goods_name,callback:function(e){t.$set(t.addGoodsForm,"goods_name",e)},expression:"addGoodsForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_price,callback:function(e){t.$set(t.addGoodsForm,"goods_price",e)},expression:"addGoodsForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_number,callback:function(e){t.$set(t.addGoodsForm,"goods_number",e)},expression:"addGoodsForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_weight,callback:function(e){t.$set(t.addGoodsForm,"goods_weight",e)},expression:"addGoodsForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.cateList,props:t.cateProps},on:{change:t.handleChange},model:{value:t.addGoodsForm.goods_cat,callback:function(e){t.$set(t.addGoodsForm,"goods_cat",e)},expression:"addGoodsForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyListData,(function(e,r){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{border:"",label:t}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyListData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{"on-success":t.handleSuccess,action:t.updateUrl,headers:t.headers,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{ref:"goodsRef",model:{value:t.addGoodsForm.goods_introduce,callback:function(e){t.$set(t.addGoodsForm,"goods_introduce",e)},expression:"addGoodsForm.goods_introduce"}}),a("el-button",{staticClass:"goods-btn",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.imgDialogVisible,width:"50%"},on:{"update:visible":function(e){t.imgDialogVisible=e}}},[a("img",{staticClass:"img",attrs:{src:t.tempPath,alt:""}})])],1)},n=[],o=a("1da1"),s=(a("159b"),a("ac1f"),a("1276"),a("c740"),a("a434"),a("a15b"),a("96cf"),a("60bb")),i=a.n(s),l={data:function(){return{activeIndex:"0",addGoodsForm:{goods_name:"",goods_price:1,goods_number:1,goods_weight:1,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},addGoodsRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},cateList:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},manyListData:[],onlyListData:[],updateUrl:"http://127.0.0.1:8888/api/private/v1/upload",headers:{Authorization:window.sessionStorage.getItem("token")},imgDialogVisible:!1,tempPath:""}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类数据失败！"));case 6:t.cateList=r.data;case 7:case"end":return e.stop()}}),e)})))()},handleChange:function(){3!==this.addGoodsForm.goods_cat.length&&(this.addGoodsForm.goods_cat=[])},beforeTabLeave:function(t,e){if("0"===e&&3!==this.addGoodsForm.goods_cat.length)return this.$message.error("请选择商品分类！"),!1},tabClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==t.activeIndex){e.next=11;break}return e.next=3,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"many"}});case 3:if(a=e.sent,r=a.data,200===r.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取参数列表数据失败！"));case 7:r.data.forEach((function(t){t.attr_vals=0===t.attr_vals.length?[]:t.attr_vals.split(",")})),t.manyListData=r.data,e.next=19;break;case 11:if("2"!==t.activeIndex){e.next=19;break}return e.next=14,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"only"}});case 14:if(n=e.sent,o=n.data,200===o.meta.status){e.next=18;break}return e.abrupt("return",t.$message.error("获取参数列表数据失败！"));case 18:t.onlyListData=o.data;case 19:case"end":return e.stop()}}),e)})))()},handlePreview:function(t){this.tempPath=t.response.data.url,this.imgDialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.addGoodsForm.pics.findIndex((function(t){return t.pic===e}));this.addGoodsForm.pics.splice(a,1)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.addGoodsForm.pics.push(e)},addGoods:function(){var t=this;this.$refs.addGoodsRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.manyListData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals.join(",")};t.addGoodsForm.attrs.push(a)})),t.onlyListData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addGoodsForm.attrs.push(a)})),r=i.a.cloneDeep(t.addGoodsForm),r.goods_cat=r.goods_cat.join(","),e.next=8,t.$http.post("goods",r);case 8:if(n=e.sent,o=n.data,201===o.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error(o.meta.msg));case 12:t.$message.success("添加成功！"),t.$router.push("/goods");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{getCateId:function(){return 3===this.addGoodsForm.goods_cat.length?this.addGoodsForm.goods_cat[2]:null}}},c=l,u=(a("f245"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"28c524d9",null);e["default"]=d.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),o="["+n+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),l=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"7f6a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("添加分类")])],1)],1),a("zk-table",{attrs:{data:t.cateList,columns:t.columns,"selection-type":!1,"expand-type":!1,border:"","show-index":""},scopedSlots:t._u([{key:"isOk",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"springgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"level",fn:function(e){return[0===e.row.cat_level?a("el-tag",[t._v("一级")]):1===e.row.cat_level?a("el-tag",{attrs:{type:"success"}},[t._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[t._v("三级")])]}},{key:"opt",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.editCate(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}},[t._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[1,2,10,100],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:t.addCateDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addCateDialogVisible=e},close:t.addCateDialogClose}},[a("el-form",{ref:"addCateRef",attrs:{model:t.addCateForm,rules:t.addCateRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父分类"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.parentCateList,props:t.parentCateProps,clearable:"","change-on-select":""},on:{change:t.parentCateChange},model:{value:t.parentArray,callback:function(e){t.parentArray=e},expression:"parentArray"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addCateDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.subAddCateForm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:t.editCateDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editCateDialogVisible=e},close:t.editCateClose}},[a("el-form",{ref:"editCateRef",attrs:{model:t.editCateForm,rules:t.editCateRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.editCateForm.cat_name,callback:function(e){t.$set(t.editCateForm,"cat_name",e)},expression:"editCateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editCateDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.subEditCate}},[t._v("确 定")])],1)],1)],1)},n=[],o=a("1da1"),s=(a("96cf"),{data:function(){return{cateList:[],queryInfo:{type:3,pagenum:1,pagesize:2},total:0,columns:[{label:"分类名称",prop:"cat_name",align:"center",headerAlign:"center"},{label:"是否有效",prop:"cat_deleted",align:"center",headerAlign:"center",type:"template",template:"isOk"},{label:"排序",align:"center",headerAlign:"center",type:"template",template:"level"},{label:"操作",align:"center",headerAlign:"center",type:"template",template:"opt"}],parentCateList:[],parentArray:[],parentCateProps:{value:"cat_id",label:"cat_name",children:"children"},addCateForm:{cat_pid:0,cat_name:"",cat_level:0},addCateRules:{cat_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}]},addCateDialogVisible:!1,editCateDialogVisible:!1,editCateForm:{},editCateRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:t.queryInfo});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类失败！"));case 6:t.cateList=r.data.result,t.total=r.data.total;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getCateList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getCateList()},addCate:function(){this.getParentCateList(),this.addCateDialogVisible=!0},addCateDialogClose:function(){this.parentArray=[],this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0,this.$refs.addCateRef.resetFields()},getParentCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:2}});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取父分类数据失败!"));case 6:t.parentCateList=r.data;case 7:case"end":return e.stop()}}),e)})))()},parentCateChange:function(){this.parentArray.length>0?(this.addCateForm.cat_pid=this.parentArray[this.parentArray.length-1],this.addCateForm.cat_level=this.parentArray.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0)},subAddCateForm:function(){var t=this;this.$refs.addCateRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("categories",t.addCateForm);case 4:if(r=e.sent,n=r.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加失败!"));case 8:t.$message.success("添加成功!"),t.getCateList(),t.addCateDialogVisible=!1;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editCate:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.get("categories/".concat(t.cat_id));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("获取数据失败！"));case 6:e.editCateForm=n.data,e.editCateDialogVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},subEditCate:function(){var t=this;this.$refs.editCateRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("categories/".concat(t.editCateForm.cat_id),{cat_name:t.editCateForm.cat_name});case 4:if(r=e.sent,n=r.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("更新失败！"));case 8:t.$message.success("更新成功！"),t.getCateList(),t.editCateDialogVisible=!1;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editCateClose:function(){this.$refs.editCateRef.resetFields()}}}),i=s,l=(a("8a21"),a("2877")),c=Object(l["a"])(i,r,n,!1,null,"02947654",null);e["default"]=c.exports},"8a21":function(t,e,a){"use strict";a("1356")},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},9263:function(t,e,a){"use strict";var r=a("ad6d"),n=a("9f7f"),o=a("5692"),s=a("7c73"),i=a("69f3").get,l=a("fce3"),c=a("107c"),u=RegExp.prototype.exec,d=o("native-string-replace",String.prototype.replace),p=u,m=function(){var t=/a/,e=/b*/g;return u.call(t,"a"),u.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),f=n.UNSUPPORTED_Y||n.BROKEN_CARET,g=void 0!==/()??/.exec("")[1],h=m||g||f||l||c;h&&(p=function(t){var e,a,n,o,l,c,h,b=this,v=i(b),_=v.raw;if(_)return _.lastIndex=b.lastIndex,e=p.call(_,t),b.lastIndex=_.lastIndex,e;var y=v.groups,x=f&&b.sticky,w=r.call(b),k=b.source,C=0,F=t;if(x&&(w=w.replace("y",""),-1===w.indexOf("g")&&(w+="g"),F=String(t).slice(b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&"\n"!==t[b.lastIndex-1])&&(k="(?: "+k+")",F=" "+F,C++),a=new RegExp("^(?:"+k+")",w)),g&&(a=new RegExp("^"+k+"$(?!\\s)",w)),m&&(n=b.lastIndex),o=u.call(x?a:b,F),x?o?(o.input=o.input.slice(C),o[0]=o[0].slice(C),o.index=b.lastIndex,b.lastIndex+=o[0].length):b.lastIndex=0:m&&o&&(b.lastIndex=b.global?o.index+o[0].length:n),g&&o&&o.length>1&&d.call(o[0],a,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o&&y)for(o.groups=c=s(null),l=0;l<y.length;l++)h=y[l],c[h[0]]=o[h[1]];return o}),t.exports=p},"96cf":function(t,e,a){var r=function(t){"use strict";var e,a=Object.prototype,r=a.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(E){l=function(t,e,a){return t[e]=a}}function c(t,e,a,r){var n=e&&e.prototype instanceof h?e:h,o=Object.create(n.prototype),s=new G(r||[]);return o._invoke=F(t,a,s),o}function u(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(E){return{type:"throw",arg:E}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",m="executing",f="completed",g={};function h(){}function b(){}function v(){}var _={};_[o]=function(){return this};var y=Object.getPrototypeOf,x=y&&y(y(L([])));x&&x!==a&&r.call(x,o)&&(_=x);var w=v.prototype=h.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function a(n,o,s,i){var l=u(t[n],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,s,i)}),(function(t){a("throw",t,s,i)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,i)}))}i(l.arg)}var n;function o(t,r){function o(){return new e((function(e,n){a(t,r,e,n)}))}return n=n?n.then(o,o):o()}this._invoke=o}function F(t,e,a){var r=d;return function(n,o){if(r===m)throw new Error("Generator is already running");if(r===f){if("throw"===n)throw o;return I()}a.method=n,a.arg=o;while(1){var s=a.delegate;if(s){var i=$(s,a);if(i){if(i===g)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var l=u(t,e,a);if("normal"===l.type){if(r=a.done?f:p,l.arg===g)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=f,a.method="throw",a.arg=l.arg)}}}function $(t,a){var r=t.iterator[a.method];if(r===e){if(a.delegate=null,"throw"===a.method){if(t.iterator["return"]&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method))return g;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=u(r,t.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,g;var o=n.arg;return o?o.done?(a[t.resultName]=o.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,g):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function L(t){if(t){var a=t[o];if(a)return a.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function a(){while(++n<t.length)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return s.next=s}}return{next:I}}function I(){return{value:e,done:!0}}return b.prototype=w.constructor=v,v.constructor=b,b.displayName=l(v,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,i,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[s]=function(){return this},t.AsyncIterator=C,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var s=new C(c(e,a,r,n),o);return t.isGeneratorFunction(a)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(w),l(w,i,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var r=e.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},t.values=L,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return i.type="throw",i.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),P(a),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var n=r.arg;P(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:L(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(n){Function("r","regeneratorRuntime = r")(r)}},"9f7f":function(t,e,a){var r=a("d039"),n=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=r((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),s=a("a640"),i=[].join,l=n!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},a1e7:function(t,e,a){},a381:function(t,e,a){"use strict";a("d3d8")},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),o=a("a691"),s=a("50c4"),i=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=u("splice"),p=Math.max,m=Math.min,f=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var a,r,u,d,h,b,v=i(this),_=s(v.length),y=n(t,_),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=_-y):(a=x-2,r=m(p(o(e),0),_-y)),_+a-r>f)throw TypeError(g);for(u=l(v,r),d=0;d<r;d++)h=y+d,h in v&&c(u,d,v[h]);if(u.length=r,a<r){for(d=y;d<_-r;d++)h=d+r,b=d+a,h in v?v[b]=v[h]:delete v[b];for(d=_;d>_-r+a;d--)delete v[d-1]}else if(a>r)for(d=_-r;d>y;d--)h=d+r-1,b=d+a-1,h in v?v[b]=v[h]:delete v[b];for(d=0;d<a;d++)v[d+y]=arguments[d+2];return v.length=_-r+a,u}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},ac1f:function(t,e,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c740:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,o=a("44d2"),s="findIndex",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},c8d2:function(t,e,a){var r=a("d039"),n=a("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||o[t]()!=o||n[t].name!==t}))}},d3d8:function(t,e,a){},d784:function(t,e,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("9263"),o=a("d039"),s=a("b622"),i=a("9112"),l=s("species"),c=RegExp.prototype;t.exports=function(t,e,a,u){var d=s(t),p=!o((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=p&&!o((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[d]=/./[d]),a.exec=function(){return e=!0,null},a[d](""),!e}));if(!p||!m||a){var f=/./[d],g=e(d,""[t],(function(t,e,a,r,o){var s=e.exec;return s===n||s===c.exec?p&&!o?{done:!0,value:f.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}}));r(String.prototype,t,g[0]),r(c,d,g[1])}u&&i(c[d],"sham",!0)}},ebde:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("编辑商品")])],1),a("el-card",[a("el-alert",{attrs:{title:"编辑商品信息",type:"info",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addGoodsRef",attrs:{model:t.addGoodsForm,rules:t.addGoodsRules,"label-width":"100px","label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addGoodsForm.goods_name,callback:function(e){t.$set(t.addGoodsForm,"goods_name",e)},expression:"addGoodsForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_price,callback:function(e){t.$set(t.addGoodsForm,"goods_price",e)},expression:"addGoodsForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_number,callback:function(e){t.$set(t.addGoodsForm,"goods_number",e)},expression:"addGoodsForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addGoodsForm.goods_weight,callback:function(e){t.$set(t.addGoodsForm,"goods_weight",e)},expression:"addGoodsForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.cateList,props:t.cateProps},on:{change:t.handleChange},model:{value:t.addGoodsForm.goods_cat,callback:function(e){t.$set(t.addGoodsForm,"goods_cat",e)},expression:"addGoodsForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyListData,(function(e,r){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{border:"",label:t}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyListData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{"on-success":t.handleSuccess,action:t.updateUrl,headers:t.headers,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{ref:"goodsRef",model:{value:t.addGoodsForm.goods_introduce,callback:function(e){t.$set(t.addGoodsForm,"goods_introduce",e)},expression:"addGoodsForm.goods_introduce"}}),a("el-button",{staticClass:"goods-btn",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("修改商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.imgDialogVisible,width:"50%"},on:{"update:visible":function(e){t.imgDialogVisible=e}}},[a("img",{staticClass:"img",attrs:{src:t.tempPath,alt:""}})])],1)},n=[],o=a("1da1"),s=(a("96cf"),a("ac1f"),a("1276"),a("159b"),a("c740"),a("a434"),a("a15b"),a("60bb")),i=a.n(s),l={data:function(){return{activeIndex:"0",addGoodsForm:{goods_name:"",goods_price:1,goods_number:1,goods_weight:1,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},addGoodsRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},cateList:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},manyListData:[],onlyListData:[],updateUrl:"http://127.0.0.1:8888/api/private/v1/upload",headers:{Authorization:window.sessionStorage.getItem("token")},imgDialogVisible:!1,tempPath:"",goodsId:""}},created:function(){this.getCateList(),this.getParams()},methods:{getParams:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.goodsId=t.$route.query.goods_id,e.next=3,t.$http.get("goods/".concat(t.goodsId));case 3:if(a=e.sent,r=a.data,200===r.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取商品信息失败！"));case 7:t.addGoodsForm=r.data,t.addGoodsForm.goods_cat=r.data.goods_cat.split(",");case 9:case"end":return e.stop()}}),e)})))()},getCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类数据失败！"));case 6:t.cateList=r.data;case 7:case"end":return e.stop()}}),e)})))()},handleChange:function(){3!==this.addGoodsForm.goods_cat.length&&(this.addGoodsForm.goods_cat=[])},beforeTabLeave:function(t,e){if("0"===e&&3!==this.addGoodsForm.goods_cat.length)return this.$message.error("请选择商品分类！"),!1},tabClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==t.activeIndex){e.next=10;break}return e.next=3,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"many"}});case 3:if(a=e.sent,r=a.data,200===r.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取参数列表数据失败！"));case 7:r.data.forEach((function(e){e.attr_vals=0===e.attr_vals.length?[]:e.attr_vals.split(","),t.manyListData=r.data})),e.next=18;break;case 10:if("2"!==t.activeIndex){e.next=18;break}return e.next=13,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"only"}});case 13:if(n=e.sent,o=n.data,200===o.meta.status){e.next=17;break}return e.abrupt("return",t.$message.error("获取参数列表数据失败！"));case 17:t.onlyListData=o.data;case 18:case"end":return e.stop()}}),e)})))()},handlePreview:function(t){this.tempPath=t.response.data.url,this.imgDialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.addGoodsForm.pics.findIndex((function(t){return t.pic===e}));this.addGoodsForm.pics.splice(a,1)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.addGoodsForm.pics.push(e)},addGoods:function(){var t=this;this.$refs.addGoodsRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.manyListData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals.join(",")};t.addGoodsForm.attrs.push(a)})),t.onlyListData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addGoodsForm.attrs.push(a)})),r=i.a.cloneDeep(t.addGoodsForm),r.goods_cat=r.goods_cat.join(","),e.next=8,t.$http.put("goods/".concat(t.goodsId),r);case 8:if(n=e.sent,o=n.data,200===o.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error(o.meta.msg));case 12:t.$message.success("修改成功！"),t.$router.push("/goods");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{getCateId:function(){return 3===this.addGoodsForm.goods_cat.length?this.addGoodsForm.goods_cat[2]:null}}},c=l,u=(a("ecdf"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"87255612",null);e["default"]=d.exports},ecdf:function(t,e,a){"use strict";a("a1e7")},f245:function(t,e,a){"use strict";a("f2c5")},f2c5:function(t,e,a){},fce3:function(t,e,a){var r=a("d039");t.exports=r((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=goods_cate.14eade8c.js.map